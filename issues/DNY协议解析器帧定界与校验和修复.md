# DNY协议解析器帧定界与校验和修复

## 任务目标
修复DNY协议解析器中由于错误的帧定界和校验和处理逻辑导致的 "checksum mismatch" 和 "api msgID = 0 is not FOUND!" 错误。

## 计划步骤

1.  **定位核心解析逻辑**: 审查 `pkg/protocol/dny_decoder.go` 和 `pkg/protocol/dny_protocol_parser.go`，找到负责帧提取和校验和计算的函数。
2.  **修正帧切分逻辑**:
    *   正确读取2字节长度字段 `L`。
    *   确保完整帧字节数为 `3 (包头) + 2 (长度字段) + L`。
    *   准确截取帧数据。
3.  **修正校验和提取逻辑**:
    *   从正确切分的帧中，定位并提取末尾2字节的原始校验和（小端）。
4.  **修正校验和计算逻辑**:
    *   校验和计算范围为 `包头 + 长度字段 + 物理ID + 消息ID + 命令 + 数据` (即完整帧排除末尾2字节校验和)。
    *   累加字节，取低2字节作为计算结果。
5.  **测试**: 使用日志中的错误数据样本进行验证。

## 涉及文件
*   `pkg/protocol/dny_decoder.go`
*   `pkg/protocol/dny_protocol_parser.go`
